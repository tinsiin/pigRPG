# ゼロトタイプ歩行システム 残要素まとめ

## 目的
- 「ゼロトタイプ歩行システム設計書」に対する未実装・不足項目を整理し、次の実装対象を明確にする。

## 参照
- doc/歩行システム設計/ゼロトタイプ歩行システム設計書.md
- 実装ベース: Assets/Script/Walk/

## 残要素一覧

### 進行/分岐
- ExitCandidate/Edgeに条件・重み付けがなく、選択UIにそのまま出るだけの状態。
- FlowGraphSO.edgesが実行ロジックに未接続（現状はNodeSO.exitsのみで遷移）。

### サイドオブジェクト
- SideObjectEntryのconditions、varietyBias、cooldown、fixedOnEnter、未選択側保持のロジックが未実装。
- VarietyHistoryIndexやNodeSeedと連動した再現性・偏り抑制が未実装。

### 中央オブジェクト/ゲート/出口
- CentralDisplayMode.AutoTriggerが未使用。中央オブジェクトのクリック経由でEventHost.Triggerへ繋ぐ導線が未実装。
- GateVisual/ExitVisualのappear/hideアニメ、SFX再生が未実装。

### 遭遇補正
- overlayやエリア倍率などの外部補正を取り込む仕組みが未実装。

### 状態/会話
- GameStateのタグ概念が未実装（flags/countersのみ）。
- DialogueDefinitionSO/ConversationRunner相当の会話定義が未実装（現状はメッセージ表示のみ）。

### 保存・検証・デバッグ
- EncounterState（cooldown/grace/pity/ミス回数）の保存が未実装。
- side object履歴、variety履歴、ロールログが保存・再現されない。
- グラフ整合性Validator、SimRunner/ロール検証ツールが未実装。

## 優先度の目安

### 高
- 分岐条件/重み付けの導入（ExitCandidate/Edge）
- サイドオブジェクトの履歴制御（varietyBias、cooldown、未選択側保持）
- EncounterStateの保存と復元

### 中
- Central AutoTrigger/クリック連携
- ゲート/出口の演出（アニメ/SFX）

### 低
- GraphView/Validator/SimRunner
- 会話専用定義（DialogueDefinitionSO/ConversationRunner）