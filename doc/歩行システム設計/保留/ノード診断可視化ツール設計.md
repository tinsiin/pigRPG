# ãƒãƒ¼ãƒ‰è¨ºæ–­å¯è¦–åŒ–ãƒ„ãƒ¼ãƒ«è¨­è¨ˆ

FlowGraphSO ã®æ§‹é€ ã¨è¨­å®šçŠ¶æ³ã‚’å¯è¦–åŒ–ã—ã€è¨ºæ–­çµæœã‚’è¡¨ç¤ºã™ã‚‹ãƒ„ãƒ¼ãƒ«ã®è¨­è¨ˆã€‚

ä½œæˆæ—¥: 2026-01-23

---

## ç›®çš„

1. **æ§‹é€ ã®å¯è¦–åŒ–** - ãƒãƒ¼ãƒ‰æ¥ç¶šã®å…¨ä½“åƒã‚’æŠŠæ¡
2. **è¨ºæ–­çµæœã®è¡¨ç¤º** - è¨­å®šãƒŸã‚¹ã‚„ä¸æ•´åˆã‚’æ—©æœŸç™ºè¦‹
3. **ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆé€£æº** - Markdown ã«åŸ‹ã‚è¾¼ã¿å¯èƒ½ãªå½¢å¼ã§å‡ºåŠ›

---

## å‡ºåŠ›å½¢å¼

### 1. Mermaid å½¢å¼ï¼ˆã‚°ãƒ©ãƒ•å¯è¦–åŒ–ï¼‰

ãƒãƒ¼ãƒ‰æ¥ç¶šã‚’è¦–è¦šçš„ã«è¡¨ç¤ºã€‚è¨ºæ–­çµæœã‚’ãƒãƒ¼ãƒ‰ãƒ©ãƒ™ãƒ«ã¨ã‚¹ã‚¿ã‚¤ãƒ«ã§è¡¨ç¾ã€‚

**ç”¨é€”:**
- ãƒãƒ¼ãƒ‰æ¥ç¶šã®å…¨ä½“åƒæŠŠæ¡
- æ¥ç¶šãƒŸã‚¹ã®ç™ºè¦‹
- ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã¸ã®åŸ‹ã‚è¾¼ã¿

**å‡ºåŠ›ä¾‹:**

```mermaid
flowchart LR
    start((Start)) --> area1
    area1[æ£®ã®å…¥å£<br/>ğŸ”¶ encounterTableæœªè¨­å®š] --> area2
    area1 --> area3
    area2[æ·±ã„æ£®<br/>âœ…] --> boss
    area3[éš ã—é€šè·¯<br/>ğŸ”´ å‡ºå£ãªã—] --> boss
    boss[ãƒœã‚¹éƒ¨å±‹<br/>ğŸ”¶ gateæ¡ä»¶æœªè¨­å®š]

    style area1 fill:#fff3cd,stroke:#856404
    style area3 fill:#f8d7da,stroke:#721c24
    style boss fill:#fff3cd,stroke:#856404
```

**ã‚¹ã‚¿ã‚¤ãƒ«å®šç¾©:**

| çŠ¶æ…‹ | è‰² | ã‚¢ã‚¤ã‚³ãƒ³ |
|------|-----|---------|
| æ­£å¸¸ | ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ | âœ… |
| è­¦å‘Š | é»„ (#fff3cd) | ğŸ”¶ |
| ã‚¨ãƒ©ãƒ¼ | èµ¤ (#f8d7da) | ğŸ”´ |

---

### 2. CSV å½¢å¼ï¼ˆä¸€è¦§è¡¨ç¤ºï¼‰

å…¨ãƒãƒ¼ãƒ‰ã®è¨­å®šçŠ¶æ³ã‚’è¡¨å½¢å¼ã§å‡ºåŠ›ã€‚ã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰ã‚·ãƒ¼ãƒˆã§ã®ç¢ºèªãƒ»ãƒ•ã‚£ãƒ«ã‚¿ã«é©ã™ã‚‹ã€‚

**ç”¨é€”:**
- å…¨ãƒãƒ¼ãƒ‰ã®è¨­å®šçŠ¶æ³ä¸€è¦§
- ç‰¹å®šã‚¨ãƒ©ãƒ¼ã®ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°
- è¨­å®šæ¼ã‚Œã®ç¶²ç¾…çš„ãƒã‚§ãƒƒã‚¯

**å‡ºåŠ›ä¾‹:**

```csv
NodeId,DisplayName,ExitCount,GateCount,HasEncounterTable,HasSideObjects,Errors,Warnings
area1,æ£®ã®å…¥å£,2,0,false,true,,encounterTableæœªè¨­å®š
area2,æ·±ã„æ£®,1,0,true,true,,
area3,éš ã—é€šè·¯,0,1,true,false,å‡ºå£ãªã—,
boss,ãƒœã‚¹éƒ¨å±‹,1,2,true,false,,gate[0]æ¡ä»¶æœªè¨­å®š
```

**ã‚«ãƒ©ãƒ å®šç¾©:**

| ã‚«ãƒ©ãƒ  | å‹ | èª¬æ˜ |
|--------|-----|------|
| NodeId | string | ãƒãƒ¼ãƒ‰ID |
| DisplayName | string | è¡¨ç¤ºå |
| ExitCount | int | å‡ºå£æ•° |
| GateCount | int | é–€æ•° |
| HasEncounterTable | bool | é­é‡ãƒ†ãƒ¼ãƒ–ãƒ«è¨­å®šæœ‰ç„¡ |
| HasSideObjects | bool | ã‚µã‚¤ãƒ‰ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆè¨­å®šæœ‰ç„¡ |
| HasOnEnter | bool | onEnterEvent è¨­å®šæœ‰ç„¡ |
| HasCentralEvent | bool | centralEvent è¨­å®šæœ‰ç„¡ |
| Errors | string | ã‚¨ãƒ©ãƒ¼ä¸€è¦§ï¼ˆã‚»ãƒŸã‚³ãƒ­ãƒ³åŒºåˆ‡ã‚Šï¼‰ |
| Warnings | string | è­¦å‘Šä¸€è¦§ï¼ˆã‚»ãƒŸã‚³ãƒ­ãƒ³åŒºåˆ‡ã‚Šï¼‰ |

---

## è¨ºæ–­é …ç›®

### é‡å¤§åº¦: Errorï¼ˆã‚°ãƒ©ãƒ•ãŒæ­£å¸¸ã«å‹•ä½œã—ãªã„ï¼‰

| ID | é …ç›® | èª¬æ˜ |
|----|------|------|
| E001 | å‡ºå£ãªã— | å‡ºå£ãŒ0å€‹ã®ãƒãƒ¼ãƒ‰ï¼ˆçµ‚ç«¯ãƒãƒ¼ãƒ‰ä»¥å¤–ï¼‰ |
| E002 | æ¥ç¶šå…ˆä¸å­˜åœ¨ | Exit.toNodeId ãŒå­˜åœ¨ã—ãªã„ãƒãƒ¼ãƒ‰ã‚’å‚ç…§ |
| E003 | åˆ°é”ä¸èƒ½ | startNodeId ã‹ã‚‰åˆ°é”ã§ããªã„ãƒãƒ¼ãƒ‰ |
| E004 | å¾ªç’°ã®ã¿ | å‡ºå£ã«å‘ã‹ã†çµŒè·¯ãŒãªã„é–‰ã˜ãŸãƒ«ãƒ¼ãƒ— |
| E005 | é–‹å§‹ãƒãƒ¼ãƒ‰æœªè¨­å®š | startNodeId ãŒç©ºã¾ãŸã¯å­˜åœ¨ã—ãªã„ |

### é‡å¤§åº¦: Warningï¼ˆå‹•ä½œã™ã‚‹ãŒè¨­å®šæ¼ã‚Œã®å¯èƒ½æ€§ï¼‰

| ID | é …ç›® | èª¬æ˜ |
|----|------|------|
| W001 | encounterTableæœªè¨­å®š | encounterRateMultiplier > 0 ãªã®ã« encounterTable ãŒnull |
| W002 | sideObjectTableæœªè¨­å®š | ã‚µã‚¤ãƒ‰ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆæ©Ÿèƒ½ã‚’ä½¿ã‚ãªã„æ„å›³ã‹ç¢ºèª |
| W003 | é–€æ¡ä»¶æœªè¨­å®š | GateMarker.passConditions ãŒç©º |
| W004 | é–€ã‚¤ãƒ™ãƒ³ãƒˆæœªè¨­å®š | GateMarker.gateEvent ãŒnull |
| W005 | å‡ºå£æ¡ä»¶æœªè¨­å®š | è¤‡æ•°å‡ºå£ãŒã‚ã‚‹ã®ã« conditions ãŒå…¨ã¦ç©º |
| W006 | è¡¨ç¤ºåæœªè¨­å®š | displayName ãŒç©º |
| W007 | é‡è¤‡ãƒãƒ¼ãƒ‰ID | åŒã˜ nodeId ã‚’æŒã¤ãƒãƒ¼ãƒ‰ãŒè¤‡æ•°å­˜åœ¨ |
| W008 | å‡ºå£ãƒ©ãƒ™ãƒ«æœªè¨­å®š | è¤‡æ•°å‡ºå£ãŒã‚ã‚‹ã®ã« uiLabel ãŒç©º |

### é‡å¤§åº¦: Infoï¼ˆå‚è€ƒæƒ…å ±ï¼‰

| ID | é …ç›® | èª¬æ˜ |
|----|------|------|
| I001 | å˜ä¸€å‡ºå£ | å‡ºå£ãŒ1ã¤ã®ã¿ï¼ˆåˆ†å²ãªã—ï¼‰ |
| I002 | é«˜é–€æ•° | é–€ãŒ3ã¤ä»¥ä¸Šï¼ˆè¤‡é›‘åº¦ã®ç›®å®‰ï¼‰ |
| I003 | é•·ãƒˆãƒ©ãƒƒã‚¯ | trackLength ãŒ 200 ä»¥ä¸Š |

---

## ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

```
FlowGraphSO
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ GraphDiagnostics                â”‚
â”‚   - Validate(FlowGraphSO)       â”‚
â”‚   - Returns DiagnosticResult    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
DiagnosticResult
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Mermaid     â”‚ CSV         â”‚
â”‚ Exporter    â”‚ Exporter    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“               â†“
.md file        .csv file
or clipboard    or clipboard
```

---

## ãƒ•ã‚¡ã‚¤ãƒ«æ§‹æˆ

```
Assets/Editor/Walk/Diagnostics/
â”œâ”€â”€ GraphDiagnostics.cs       # è¨ºæ–­ãƒ­ã‚¸ãƒƒã‚¯
â”œâ”€â”€ DiagnosticResult.cs       # è¨ºæ–­çµæœãƒ‡ãƒ¼ã‚¿
â”œâ”€â”€ DiagnosticEntry.cs        # å€‹åˆ¥è¨ºæ–­ã‚¨ãƒ³ãƒˆãƒª
â”œâ”€â”€ MermaidExporter.cs        # Mermaid å‡ºåŠ›
â”œâ”€â”€ CsvExporter.cs            # CSV å‡ºåŠ›
â””â”€â”€ FlowGraphDiagnosticsWindow.cs  # (å°†æ¥) ã‚¨ãƒ‡ã‚£ã‚¿ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦
```

---

## ã‚¯ãƒ©ã‚¹è¨­è¨ˆ

### DiagnosticEntry

```csharp
public enum DiagnosticSeverity
{
    Info,
    Warning,
    Error
}

public readonly struct DiagnosticEntry
{
    public string Id { get; }           // "E001", "W003" ãªã©
    public DiagnosticSeverity Severity { get; }
    public string NodeId { get; }       // å¯¾è±¡ãƒãƒ¼ãƒ‰ï¼ˆã‚°ãƒ©ãƒ•å…¨ä½“ã®å ´åˆã¯nullï¼‰
    public string Message { get; }      // äººé–“å‘ã‘ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸
}
```

### DiagnosticResult

```csharp
public sealed class DiagnosticResult
{
    public IReadOnlyList<DiagnosticEntry> Entries { get; }

    public IEnumerable<DiagnosticEntry> GetEntriesForNode(string nodeId);
    public bool HasErrors { get; }
    public bool HasWarnings { get; }
    public int ErrorCount { get; }
    public int WarningCount { get; }
}
```

### GraphDiagnostics

```csharp
public sealed class GraphDiagnostics
{
    public DiagnosticResult Validate(FlowGraphSO graph)
    {
        var entries = new List<DiagnosticEntry>();

        ValidateStartNode(graph, entries);
        ValidateReachability(graph, entries);

        foreach (var node in graph.Nodes)
        {
            ValidateNode(node, graph, entries);
        }

        return new DiagnosticResult(entries);
    }

    void ValidateNode(NodeSO node, FlowGraphSO graph, List<DiagnosticEntry> entries)
    {
        ValidateExits(node, graph, entries);
        ValidateGates(node, entries);
        ValidateEncounter(node, entries);
        ValidateSideObjects(node, entries);
        ValidateDisplayName(node, entries);
    }
}
```

### MermaidExporter

```csharp
public static class MermaidExporter
{
    public static string Export(FlowGraphSO graph, DiagnosticResult diagnostics)
    {
        var sb = new StringBuilder();
        sb.AppendLine("```mermaid");
        sb.AppendLine("flowchart LR");

        // é–‹å§‹ãƒãƒ¼ãƒ‰
        sb.AppendLine($"    start((Start)) --> {graph.StartNodeId}");

        // å„ãƒãƒ¼ãƒ‰
        foreach (var node in graph.Nodes)
        {
            var nodeEntries = diagnostics.GetEntriesForNode(node.NodeId).ToList();
            var label = BuildLabel(node, nodeEntries);
            sb.AppendLine($"    {SanitizeId(node.NodeId)}[{label}]");

            // ã‚¹ã‚¿ã‚¤ãƒ«
            var style = GetStyle(nodeEntries);
            if (style != null)
                sb.AppendLine($"    style {SanitizeId(node.NodeId)} {style}");

            // æ¥ç¶š
            foreach (var exit in node.Exits ?? Array.Empty<ExitCandidate>())
            {
                var edgeLabel = string.IsNullOrEmpty(exit.UILabel) ? "" : $"|{exit.UILabel}|";
                sb.AppendLine($"    {SanitizeId(node.NodeId)} -->{edgeLabel} {SanitizeId(exit.ToNodeId)}");
            }
        }

        sb.AppendLine("```");
        return sb.ToString();
    }

    static string BuildLabel(NodeSO node, List<DiagnosticEntry> entries)
    {
        var name = string.IsNullOrEmpty(node.DisplayName) ? node.NodeId : node.DisplayName;

        if (entries.Count == 0)
            return $"{name}<br/>âœ…";

        var worst = entries.Max(e => e.Severity);
        var icon = worst == DiagnosticSeverity.Error ? "ğŸ”´" : "ğŸ”¶";
        var firstMessage = entries.First().Message;

        return $"{name}<br/>{icon} {firstMessage}";
    }

    static string GetStyle(List<DiagnosticEntry> entries)
    {
        if (entries.Count == 0) return null;

        var worst = entries.Max(e => e.Severity);
        return worst switch
        {
            DiagnosticSeverity.Error => "fill:#f8d7da,stroke:#721c24",
            DiagnosticSeverity.Warning => "fill:#fff3cd,stroke:#856404",
            _ => null
        };
    }

    static string SanitizeId(string id)
    {
        // Mermaid ã§ä½¿ãˆãªã„æ–‡å­—ã‚’ç½®æ›
        return id?.Replace("-", "_").Replace(" ", "_") ?? "unknown";
    }
}
```

### CsvExporter

```csharp
public static class CsvExporter
{
    public static string Export(FlowGraphSO graph, DiagnosticResult diagnostics)
    {
        var sb = new StringBuilder();

        // ãƒ˜ãƒƒãƒ€ãƒ¼
        sb.AppendLine("NodeId,DisplayName,ExitCount,GateCount,HasEncounterTable,HasSideObjects,HasOnEnter,HasCentralEvent,Errors,Warnings");

        foreach (var node in graph.Nodes)
        {
            var entries = diagnostics.GetEntriesForNode(node.NodeId).ToList();
            var errors = string.Join("; ", entries.Where(e => e.Severity == DiagnosticSeverity.Error).Select(e => e.Message));
            var warnings = string.Join("; ", entries.Where(e => e.Severity == DiagnosticSeverity.Warning).Select(e => e.Message));

            sb.AppendLine(string.Join(",",
                Escape(node.NodeId),
                Escape(node.DisplayName),
                node.Exits?.Length ?? 0,
                node.Gates?.Length ?? 0,
                node.EncounterTable != null,
                node.SideObjectTable != null,
                node.OnEnterEvent != null,
                node.CentralEvent != null,
                Escape(errors),
                Escape(warnings)
            ));
        }

        return sb.ToString();
    }

    static string Escape(string value)
    {
        if (string.IsNullOrEmpty(value)) return "";
        if (value.Contains(",") || value.Contains("\"") || value.Contains("\n"))
            return $"\"{value.Replace("\"", "\"\"")}\"";
        return value;
    }
}
```

---

## Unity ã‚¨ãƒ‡ã‚£ã‚¿çµ±åˆ

### ãƒ¡ãƒ‹ãƒ¥ãƒ¼é …ç›®

```
Walk/
â”œâ”€â”€ Diagnostics/
â”‚   â”œâ”€â”€ Export to Mermaid (Clipboard)    # Mermaid ã‚’ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ”ãƒ¼
â”‚   â”œâ”€â”€ Export to Mermaid (File)         # .md ãƒ•ã‚¡ã‚¤ãƒ«ã¨ã—ã¦ä¿å­˜
â”‚   â”œâ”€â”€ Export to CSV (Clipboard)        # CSV ã‚’ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ”ãƒ¼
â”‚   â”œâ”€â”€ Export to CSV (File)             # .csv ãƒ•ã‚¡ã‚¤ãƒ«ã¨ã—ã¦ä¿å­˜
â”‚   â””â”€â”€ Run Diagnostics (Console)        # è¨ºæ–­çµæœã‚’Consoleã«å‡ºåŠ›
```

### ä½¿ç”¨æ–¹æ³•

1. Project ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã§ FlowGraphSO ã‚’é¸æŠ
2. ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‹ã‚‰ `Walk > Diagnostics > Export to Mermaid (Clipboard)` ã‚’é¸æŠ
3. Markdown ãƒ•ã‚¡ã‚¤ãƒ«ã‚„ GitHub Issue ã«ãƒšãƒ¼ã‚¹ãƒˆ

---

## å‡ºåŠ›å…ˆ

| å½¢å¼ | æ¨å¥¨å‡ºåŠ›å…ˆ |
|------|-----------|
| Mermaid | `doc/æ­©è¡Œã‚·ã‚¹ãƒ†ãƒ è¨­è¨ˆ/graphs/` ã¾ãŸã¯ç›´æ¥ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã«åŸ‹ã‚è¾¼ã¿ |
| CSV | `doc/æ­©è¡Œã‚·ã‚¹ãƒ†ãƒ è¨­è¨ˆ/diagnostics/` ã¾ãŸã¯ä¸€æ™‚ãƒ•ã‚¡ã‚¤ãƒ« |

---

## å°†æ¥æ‹¡å¼µ

### Phase 2: ã‚¨ãƒ‡ã‚£ã‚¿ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦

Unity å†…ã§è¨ºæ–­çµæœã‚’ä¸€è¦§è¡¨ç¤ºã—ã€ãƒãƒ¼ãƒ‰ã‚’ã‚¯ãƒªãƒƒã‚¯ã™ã‚‹ã¨ Inspector ã§é–‹ãã€‚

#### é–‹ãæ–¹

```
Unity ãƒ¡ãƒ‹ãƒ¥ãƒ¼ â†’ Window â†’ Walk â†’ Flow Graph Diagnostics
```

ã¾ãŸã¯

```
FlowGraphSO ã‚’å³ã‚¯ãƒªãƒƒã‚¯ â†’ Open Diagnostics
```

#### ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦å…¨ä½“åƒ

```
â”Œâ”€ Flow Graph Diagnostics â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                        â”‚
â”‚  Graph: [â–¼ SampleStage        ] [ğŸ”„ Refresh] [ğŸ“‹ Copy Mermaid] [ğŸ’¾ CSV]â”‚
â”‚                                                                        â”‚
â”œâ”€ Summary â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                        â”‚
â”‚   Total: 8 nodes    ğŸ”´ 2 Errors    ğŸ”¶ 5 Warnings    âœ… 1 OK           â”‚
â”‚                                                                        â”‚
â”œâ”€ Issues â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [Filter: â–¼ All  ] [ğŸ” Search...                    ]                  â”‚
â”‚                                                                        â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ é‡å¤§ â”‚ ãƒãƒ¼ãƒ‰    â”‚ å†…å®¹                                   â”‚ æ“ä½œ   â”‚ â”‚
â”‚ â”œâ”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
â”‚ â”‚ ğŸ”´   â”‚ area3    â”‚ E002: æ¥ç¶šå…ˆ area99 ãŒå­˜åœ¨ã—ã¾ã›ã‚“      â”‚ [Select]â”‚ â”‚
â”‚ â”‚ ğŸ”´   â”‚ deadend  â”‚ E001: å‡ºå£ãŒã‚ã‚Šã¾ã›ã‚“                  â”‚ [Select]â”‚ â”‚
â”‚ â”‚ ğŸ”¶   â”‚ area1    â”‚ W001: encounterTable ãŒæœªè¨­å®šã§ã™       â”‚ [Select]â”‚ â”‚
â”‚ â”‚ ğŸ”¶   â”‚ boss     â”‚ W003: gate[0] ã®é€šéæ¡ä»¶ãŒæœªè¨­å®šã§ã™    â”‚ [Select]â”‚ â”‚
â”‚ â”‚ ğŸ”¶   â”‚ boss     â”‚ W004: gate[1] ã® gateEvent ãŒæœªè¨­å®šã§ã™ â”‚ [Select]â”‚ â”‚
â”‚ â”‚ ğŸ”¶   â”‚ area2    â”‚ W006: displayName ãŒæœªè¨­å®šã§ã™          â”‚ [Select]â”‚ â”‚
â”‚ â”‚ ğŸ”¶   â”‚ hidden   â”‚ W002: sideObjectTable ãŒæœªè¨­å®šã§ã™      â”‚ [Select]â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                        â”‚
â”œâ”€ Node Details â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                        â”‚
â”‚  Selected: boss (ãƒœã‚¹éƒ¨å±‹)                                             â”‚
â”‚                                                                        â”‚
â”‚  Exits: 1          Gates: 2         Track: 150                         â”‚
â”‚  â”œâ”€ â†’ ending       â”œâ”€ gate_puzzle   â”œâ”€ Length: 150                     â”‚
â”‚                    â”‚   ğŸ”¶ æ¡ä»¶æœªè¨­å®š  â”œâ”€ StepDelta: 1                   â”‚
â”‚                    â””â”€ gate_battle                                      â”‚
â”‚                        ğŸ”¶ ã‚¤ãƒ™ãƒ³ãƒˆæœªè¨­å®š                                 â”‚
â”‚                                                                        â”‚
â”‚  [Open in Inspector]                                                   â”‚
â”‚                                                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### UIæ§‹æˆ

| ã‚»ã‚¯ã‚·ãƒ§ãƒ³ | å†…å®¹ |
|-----------|------|
| ãƒ˜ãƒƒãƒ€ãƒ¼ | ã‚°ãƒ©ãƒ•é¸æŠã€ãƒªãƒ•ãƒ¬ãƒƒã‚·ãƒ¥ã€ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆãƒœã‚¿ãƒ³ |
| Summary | ãƒãƒ¼ãƒ‰ç·æ•°ã€ã‚¨ãƒ©ãƒ¼/è­¦å‘Š/æ­£å¸¸ã®ä»¶æ•° |
| Issues | ãƒ•ã‚£ãƒ«ã‚¿ãƒ»æ¤œç´¢ä»˜ãã®è¨ºæ–­çµæœãƒªã‚¹ãƒˆ |
| Node Details | é¸æŠãƒãƒ¼ãƒ‰ã®æ§‹é€ ã¨å•é¡Œç®‡æ‰€è¡¨ç¤º |

#### æ“ä½œãƒ•ãƒ­ãƒ¼

1. **ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã‚’é–‹ã**
   - `Window â†’ Walk â†’ Flow Graph Diagnostics`

2. **ã‚°ãƒ©ãƒ•ã‚’é¸æŠ**
   - ãƒ‰ãƒ­ãƒƒãƒ—ãƒ€ã‚¦ãƒ³ã‹ã‚‰é¸æŠ
   - ã¾ãŸã¯ Project ã§ FlowGraphSO ã‚’é¸æŠã™ã‚‹ã¨è‡ªå‹•åˆ‡ã‚Šæ›¿ãˆ

3. **è¨ºæ–­çµæœã‚’ç¢ºèª**
   - ã‚¨ãƒ©ãƒ¼/è­¦å‘ŠãŒä¸€è¦§è¡¨ç¤º
   - ãƒ•ã‚£ãƒ«ã‚¿ã§çµã‚Šè¾¼ã¿å¯èƒ½ï¼ˆError ã®ã¿ã€ç‰¹å®šãƒãƒ¼ãƒ‰ç­‰ï¼‰

4. **å•é¡Œã®ãƒãƒ¼ãƒ‰ã‚’é¸æŠ**
   - `[Select]` ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯
   - â†’ Project ã§è©²å½“ NodeSO ãŒãƒã‚¤ãƒ©ã‚¤ãƒˆ
   - â†’ Inspector ã« NodeSO ãŒè¡¨ç¤º
   - â†’ ç›´æ¥ç·¨é›†å¯èƒ½

5. **ä¿®æ­£å¾Œã«å†è¨ºæ–­**
   - `[Refresh]` ã§å†ã‚¹ã‚­ãƒ£ãƒ³
   - ä¿®æ­£ãŒåæ˜ ã•ã‚ŒãŸã‹ç¢ºèª

#### å®Ÿè£…ã®è¤‡é›‘ã•æ¯”è¼ƒ

| æ‰‹æ®µ | å·¥æ•°ç›®å®‰ | å‚™è€ƒ |
|------|---------|------|
| Mermaid/CSV å‡ºåŠ› | 1-2æ—¥ | Phase 1 |
| ã‚«ã‚¹ã‚¿ãƒ ã‚¨ãƒ‡ã‚£ã‚¿ | 3-5æ—¥ | UI Toolkit ä½¿ç”¨ |

### Phase 3: è‡ªå‹•è¨ºæ–­

- FlowGraphSO ä¿å­˜æ™‚ã«è‡ªå‹•ã§è¨ºæ–­ã‚’å®Ÿè¡Œ
- ã‚¨ãƒ©ãƒ¼ãŒã‚ã‚‹å ´åˆã¯ Console ã«è­¦å‘Šã‚’è¡¨ç¤º
- CI/CD ã§ã®ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã«åˆ©ç”¨

---

## æ—¢å­˜ã‚³ãƒ¼ãƒ‰ã¨ã®é–¢ä¿‚

| æ—¢å­˜ | æœ¬è¨­è¨ˆã¨ã®é–¢ä¿‚ |
|------|---------------|
| `GraphValidator.cs` | è¨ºæ–­ãƒ­ã‚¸ãƒƒã‚¯ã®ä¸€éƒ¨ã‚’æµç”¨å¯èƒ½ |
| `SimRunner.cs` | ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³çµæœã‚’è¨ºæ–­ã«è¿½åŠ å¯èƒ½ |
| `WalkDebugLog.cs` | ãƒ©ãƒ³ã‚¿ã‚¤ãƒ è¨ºæ–­ã¨ã®é€£æº |

---

## å®Ÿè£…å„ªå…ˆåº¦

| Phase | å†…å®¹ | å„ªå…ˆåº¦ |
|-------|------|--------|
| 1 | GraphDiagnostics + MermaidExporter + CsvExporter | é«˜ |
| 2 | ã‚¨ãƒ‡ã‚£ã‚¿ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ | ä¸­ |
| 3 | è‡ªå‹•è¨ºæ–­ãƒ»CI é€£æº | ä½ |

---

## é–¢é€£ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

- `ã‚¼ãƒ­ãƒˆã‚¿ã‚¤ãƒ—æ­©è¡Œã‚·ã‚¹ãƒ†ãƒ è¨­è¨ˆæ›¸.md` - æ­©è¡Œã‚·ã‚¹ãƒ†ãƒ å…¨ä½“
- `GraphToolkitã¨æ­©è¡Œã‚·ã‚¹ãƒ†ãƒ ã®ç›¸æ€§è©•ä¾¡.md` - æœ¬ãƒ„ãƒ¼ãƒ«ä½œæˆã®èƒŒæ™¯
- `GraphToolkitæœªå®Ÿè£…æ©Ÿèƒ½ä¸€è¦§.md` - Graph Toolkit ã®åˆ¶ç´„
