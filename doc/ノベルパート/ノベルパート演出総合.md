# ノベルパート演出総合

ノベルパートの演出仕様を定義する。
技術的な状態管理・ライフサイクルは [ノベルパート仕様書.md](./ノベルパート仕様書.md) を参照。

---

## 三軸モデル

ノベルパートの演出は **3つの独立した軸** の組み合わせで決まる。

```
┌─────────────────────────────────────────────┐
│  軸1: DisplayMode     Dinoid ↔ Portrait     │
│  軸2: allowBacktrack  Field  ↔ Event        │
│  軸3: Zoom            なし   ↔ あり         │
└─────────────────────────────────────────────┘
```

| 軸 | 決定者 | 影響範囲 |
|----|--------|---------|
| DisplayMode | DialogueSO.DefaultMode / Step.DisplayMode | テキストボックスの見た目、MessageDropperの発火有無 |
| allowBacktrack | DialogueContext.AllowBacktrack | 入力UI、戻るボタン、スナップショット保存、バックログ |
| Zoom | NovelDialogueStep.zoomOnApproach + CentralObjectRT | ズームアニメーション、中央オブジェクトスプライト変更 |

### 典型的な組み合わせ

| シーン | DisplayMode | allowBacktrack | Zoom | 例 |
|--------|-------------|----------------|------|----|
| フィールド雑談 | Dinoid | false | なし | 通りすがりのNPCとの短い会話 |
| 中央オブジェクトとの会話 | Portrait | false | あり | サイドオブジェクトへのアプローチ |
| イベント会話 | Portrait | true | あり | ストーリーイベント |
| 演出切替あり | Dinoid→Portrait | true | あり | 会話中にモード変更 |

---

## 軸1: DisplayMode（テキストボックス）

### Dinoid モード

```
┌──────────────────────────────┐
│ [アイコン]  セリフテキスト     │ ← dinoidTextBox
│            精神属性テキスト    │
└──────────────────────────────┘
        ↑ MessageDropper（フィールド会話時のみ）
```

- **アイコン**: PortraitDatabase.GetIcon(speaker) で取得
- **精神属性**: dinoidSpiritText に表示（SetSpiritualProperty経由）
- **MessageDropper**: **フィールド会話（allowBacktrack=false）の時のみ**発火
  - イベント会話ではバックログがあるためMessageDropperは動作しない
  - メッセージブロックが画面下部から上方へ上昇
  - 前のメッセージと衝突すると全体を押し上げる
  - 親領域を超えると自動破棄

### Portrait モード

```
┌──────────────────────────────┐
│ [話者名]                      │ ← portraitSpeakerName
│ セリフテキスト                 │ ← portraitText
└──────────────────────────────┘
```

- **話者名**: speaker文字列をそのまま表示
- MessageDropperは発火しない

### モード切替アニメーション（SwitchMode）

モード切替は双方向に対応しており、**切替方向ごとに異なる演出シーケンス**が自動実行される。

#### Portrait→Dinoid（立ち絵→ディノイド）

```
Step 1: 立ち絵退場（左右同時・自動）
┌─────────────────────────┐
│  ← キャラL        キャラR →  │  Exit(): 左は-500px、右は+500px
│    スライドアウト              │  0.3秒, EaseInQuad
└─────────────────────────┘

Step 2: テキストボックス切替
旧(Portrait)               新(Dinoid)
┌────────┐
│ フェード │ → 消滅        ┌────────┐
│  アウト  │  0.15秒       │ ダンロン │ → 定位置
└────────┘  EaseInQuad    │  風登場  │  0.3秒
                          └────────┘  OutBack
```

**重要**: 立ち絵のExit()はRunnerが**自動で**呼ぶ。SOのステップでPortraitStateをnullにする必要はない。
PortraitStateがnullでない場合も、モード切替時にはExit()が走る。

#### Dinoid→Portrait（ディノイド→立ち絵）

```
Step 1: Dinoidテキストボックス フェードアウト (0.15秒, EaseInQuad)
┌────────┐
│ フェード │ → 消滅
│  アウト  │
└────────┘

Step 2: 立ち絵登場トランジション (Rockman: ~0.8秒 / None: 0.3秒)
┌─────────────────────────┐
│   キャラL        キャラR   │  通常の登場トランジション
│    登場           登場     │
└─────────────────────────┘

Step 3: Portraitテキストボックス フェードイン (0.3秒, OutBack, ダンロン風)
                          ┌────────┐
                          │ ダンロン │ → 定位置
                          │  風登場  │
                          └────────┘
```

**実装**: ExecuteStep内でdeferPortraitフラグにより、ステップ2の立ち絵変更をスキップしステップ3（モード切替）で一括処理。
`FadeOutCurrentTextBox()` → `ShowPortrait()` → `FadeInNewTextBox()` の3段階。

#### テキストボックスの登場演出（共通）

```
旧テキストボックス                新テキストボックス
┌────────┐
│ フェード │ → 消滅              ┌────────┐
│  アウト  │  0.15秒             │ ダンロン │ → 定位置
└────────┘  EaseInQuad          │  風登場  │  0.3秒
                                └────────┘  OutBack
```

**フェードイン詳細（ダンロン風）**:
- 開始位置: 定位置から右に+50px、下に-50px
- 開始回転: 5°
- 3要素を同時にアニメーション:
  - 位置: (x+50, y-50) → (x, y)
  - 回転: 5° → 0°
  - 透明度: 0 → 1

**パラメータ**:
| 項目 | 値 | 変数 |
|------|-----|------|
| 切替時間 | 0.3秒 | `switchDuration` |
| 出現オフセット | 50px | `appearOffset` |
| 出現回転 | 5° | `appearRotation` |
| フェードアウト倍率 | ×0.5 | `switchDuration * 0.5f` |

### 即座切替（SetModeImmediate）

戻る機能時に使用。アニメーションなしで即座にGameObjectのactive/alphaを切り替える。

---

## 軸2: allowBacktrack（フィールド会話 vs イベント会話）

`allowBacktrack` は1つのbooleanだが、これによって入力・ログ・復元の全てが切り替わる。
**演出（立ち絵・背景・ズーム・モード切替）は共通で、違いは以下の表の範囲のみ。**

### フィールド会話とイベント会話の完全な違い

| 項目 | フィールド (false) | イベント (true) |
|------|-------------------|----------------|
| **TabState** | FieldDialogue | EventDialogue |
| **入力UI** | タップ全面（FieldDialogueUI） | ←戻る / 進む→（EventDialogueUI） |
| **入力待ちメソッド** | WaitForNextAsync() | WaitForNextOrBackAsync() |
| **戻るボタン** | なし | 2ステップ目以降で有効 |
| **スナップショット** | 保存しない（snapshots = null） | 毎ステップ保存 |
| **バックログ** | 保存しない | 毎ステップ記録 |
| **MessageDropper** | Dinoidモード時に発火（流れるログ） | **発火しない**（バックログで代替） |
| **戻る時の復元** | — | Immediate系メソッドで即座復元 |

**共通（allowBacktrackに依存しない）:**
- 立ち絵トランジション（Rockman/Slide等）
- 背景トランジション（Show/Hide/SlideIn）
- テキストボックス切替（ダンロン風）
- ズーム（CentralObjectRT依存）
- 雑音（NoisePresenter）
- 選択肢（NovelChoicePresenter）

### フィールド会話（allowBacktrack = false）

```
TabState.FieldDialogue
┌──────────────────────────────┐
│                              │
│      [ タップ領域 (全面) ]    │ ← FieldDialogueUI
│                              │
└──────────────────────────────┘
        ↓ タップ
  inputHub.NotifyNext()
        ↓
  WaitForNextAsync() が解決
```

- ログは **MessageDropper**（Dinoidモード時のみ）。上昇する流れるログで、過去のセリフが視覚的に残る
- 戻れないため、スナップショットは不要

### イベント会話（allowBacktrack = true）

```
TabState.EventDialogue
┌──────────────────────────────┐
│                              │
│  [← 戻る]        [進む →]   │ ← EventDialogueUI
│                              │
└──────────────────────────────┘
     ↓ 戻る                ↓ 進む
NotifyBack()          NotifyNext()
     ↓                     ↓
WaitForNextOrBackAsync() → false / true
```

- ログは **バックログ**（DialogueBacklog）。MessageDropperは動作しない
- 戻る操作時は RestoreState → ステップ再実行で復元

### 選択肢モード（一時的）

```
TabState.NovelChoice
┌──────────────────────────────┐
│  [ 選択肢A ]                  │
│  [ 選択肢B ]                  │ ← NovelChoicePresenter
│  [ 選択肢C ]                  │
└──────────────────────────────┘
         ↓ クリック
   inputHub.NotifyChoice(index)
         ↓
   WaitForChoiceAsync() が解決
```

- 選択肢クリック後、ボタンは自動的に全削除（ClearAllButtons）
- 選択後、元のTabState（FieldDialogue or EventDialogue）に復帰

### TabState → UI切替の仕組み

```
SetTabState(state)
    ↓
UIStateHub.UserState.Value = state     ← R3 ReactiveProperty
    ↓
購読者（CharaConfigContent等）が反応
    ↓
歩行UI/戦闘UI を非表示
ノベルUI を表示
```

**重要**: SetTabStateはExecuteStep冒頭で呼ばれる。立ち絵トランジション等のアニメーションより**前**に呼ぶことで、アニメーションが確実に見える状態にする。

---

## 軸3: Zoom（中央オブジェクト）

### ズームのライフサイクル

ズームはNovelDialogueStep（Step層）が管理する。DialogueRunner（Runner層）ではない。

```
NovelDialogueStep.ExecuteAsync()
│
├── ズーム判定
│   shouldZoom = overrideZoom ? step設定 : SO設定
│   canZoom = shouldZoom && NovelUI != null && CentralObjectRT != null
│
├── ZoomToCentralAsync(centralObjectRT, focusArea)    ← ダイアログ開始前
│       ZoomContainer の scale + position をアニメーション (0.4秒, OutQuad)
│
├── try: RunDialogueAsync(context)                    ← ダイアログ実行中
│       └── step.HasCentralObjectChange の場合
│           └── UpdateCentralObjectSprite(sprite)     ← スプライト差替え可能
│
└── finally: ExitZoomAsync()                          ← 必ず実行
        ZoomContainer を元の scale + position に復帰 (0.4秒, OutQuad)
```

### ズーム設定の優先順位

```
overrideZoom = true  → NovelDialogueStep の設定を使用
overrideZoom = false → DialogueSO の設定を使用
```

| 設定源 | フィールド | デフォルト |
|--------|----------|----------|
| NovelDialogueStep | zoomOnApproach, focusArea | true, Full |
| DialogueSO | ZoomOnApproach, FocusArea | true, Full |

### FocusArea（ズーム対象領域）

中央オブジェクトのどの部分にフォーカスするか。

| プリセット | 領域（相対座標） | 用途 |
|-----------|----------------|------|
| **Full** | 全体 (0,0)-(1,1) | デフォルト。オブジェクト全体を表示 |
| **UpperHalf** | 上半分 (0,0.5)-(1,0.5) | 顔周りのアップ |
| **UpperThird** | 上1/3 (0,0.67)-(1,0.33) | 顔のみクローズアップ |
| **LowerHalf** | 下半分 (0,0)-(1,0.5) | 下半身フォーカス |
| **Center** | 中央正方形 (0.25,0.25)-(0.5,0.5) | 胴体中心 |
| **CenterWide** | 中央横長 (0.1,0.25)-(0.8,0.5) | 胴体ワイド |
| **Custom** | 任意のRect | 細かい調整 |

### ズーム計算

```
スケール = Lerp(targetH / focusH, targetW / focusW, FitBlend) × Margin
位置     = フォーカス領域の中心がTargetRectの中心に来るよう計算
```

| パラメータ | デフォルト | 意味 |
|-----------|----------|------|
| ZoomDuration | 0.4秒 | アニメーション時間 |
| ZoomEase | OutQuad | イージング |
| FitBlend | 0.5 | 0=縦基準, 1=横基準, 0.5=平均 |
| Margin | 0.9 | 90%までズーム（10%余白） |

### 中央オブジェクトのアニメーション

**表示（ShowWithAnimation）**:
- スケール: 0.8 → 1.0 + フェードイン（0.3秒, OutBack）

**退場（HideWithAnimation）**:
- 2段階移動: 開始 → 中間(+320, -160) → 終点(+480, -240)
- フェードアウト（0.25秒, InQuad）
- 左右方向ランダム

---

## 立ち絵トランジション（PortraitPresenter）

### トランジション一覧

| タイプ | 演出 | 時間 | 用途 |
|--------|------|------|------|
| **None** | フェードイン | 0.3秒 | シンプルな登場 |
| **Rockman** | キャラ色の縦線降下 → 立ち絵が下から成長 | ~0.8秒 | 印象的な初登場 |
| **SlideTop** | 上から降りてくる + フェードイン | 0.3秒 | 上方からの登場 |
| **SlideBottom** | 下から上がる + フェードイン | 0.3秒 | 下方からの登場 |

### Rockman トランジション詳細

```
Phase 1: 縦線（rainBar）降下
┌─────────────┐
│ ▎▎▎▎▎▎▎▎▎▎ │ ← キャラのテーマカラーで着色
│  ↓ 降下     │    Y: originalPos+400 → originalPos
│             │    alpha: 0 → 1（0.35秒, OutQuad）
└─────────────┘

Phase 2: 縦線フェードアウト
                    alpha: 1 → 0（0.15秒）

Phase 3: 立ち絵成長
┌─────────────┐
│             │
│   キャラ     │ ← Y: originalPos-80 → originalPos
│    ↑ 成長   │    alpha: 0 → 1（0.45秒, OutQuad）
└─────────────┘
```

**テーマカラー**: PortraitDatabase.GetThemeColor(characterId) で取得

### 退場方法

| メソッド | 演出 | 発動条件 |
|---------|------|---------|
| **Hide(pos)** | その場でフェードアウト（0.3秒, InQuad） | 次ステップでPortraitStateがnull（同一モード内でのキャラ退場） |
| **Exit(pos)** | 横スライド+フェードアウト（左:-500px, 右:+500px, 0.3秒, InQuad） | Portrait→Dinoidモード切替時に**Runnerが自動実行**（SOでの指定不要） |

### スキップ条件

同じキャラID + 同じ表情 → **アニメーションなし**（スプライト変更もなし）。
表情だけ変わる場合は、指定されたトランジションで新しいスプライトが登場する。

### パラメータ

| 項目 | 値 | 変数 |
|------|-----|------|
| 通常トランジション時間 | 0.3秒 | `transitionDuration` |
| Rockman縦線降下時間 | 0.35秒 | `rainBarDuration` |
| Rockman成長時間 | 0.45秒 | `transitionDuration * 1.5f` |
| 成長オフセット | 80px | `growOffset` |
| 退場スライド距離 | 500px | `exitSlideDistance` |
| Slide系オフセット | 200px | `slideOffset` |
| イージング（登場） | OutQuad | — |
| イージング（退場） | InQuad | — |

---

## 背景トランジション（BackgroundPresenter）

| メソッド | 演出 | 時間 | イージング |
|---------|------|------|----------|
| `Show(id)` | フェードイン | 0.3秒 | OutQuad |
| `SlideIn(id)` | 右から左へスライド（1920px） | 0.3秒 | OutQuad |
| `Hide()` | フェードアウト | 0.3秒 | InQuad |

- 背景データ: BackgroundDatabase から ID で検索
- Tintカラー: BackgroundData.Tint で色調補正（デフォルト白）

---

## 雑音（NoisePresenter）— 弾幕コメント

### 表示方式

```
──────────────────────────────────────
           ← [icon] セリフ1          ← アイコン付き（DB登録済みSpeaker）
          ← セリフ2                  ← 話者なし（アイコンなし）
                ← [話者B] セリフ3    ← DB未登録（テキストフォールバック）
──────────────────────────────────────
```

- 右端から出現、テキスト全体が左端を通過しきったら自動破棄
- 各エントリに個別の遅延・速度・Y位置を指定可能
- テキスト色・フォントサイズ等の見た目はPrefabで設定（詳細は後述のパラメータ節を参照）
- Speaker指定時: `PortraitDatabase.GetIcon(speaker)` でアイコン取得
  - アイコンあり → テキスト左に40pxアイコン表示（半透明黒の背景付き）、テキストはセリフのみ
  - アイコンなし → 従来通り `[Speaker] Text` テキスト表示
- Speaker未指定時: テキストのみ（アイコンなし）
- レイアウト: `HorizontalLayoutGroup` + `ContentSizeFitter` で横並び自動サイズ

### パラメータ

#### コード側（NoisePresenter Inspector）

| 項目 | デフォルト | NoiseEntry側で上書き |
|------|----------|-------------------|
| 基本速度 | 300px/秒 | SpeedMultiplier（乗算） |
| Y位置 | baseY | VerticalOffset（加算） |
| 出現遅延 | 0秒 | DelaySeconds |
| Yランダム散布 | ±50px | scatterRange |
| 加速倍率 | ×5 | accelerateMultiplier |
| 加速イージング | EaseIn Quad, 0.3秒 | accelerateDuration |
| Y重複回避間隔 | 42px | minVerticalGap |

#### 見た目（Prefab: `Assets/prefab/novel/NoisePrefab.prefab`）

フォントサイズ、テキスト色、アイコンサイズ、アイコン背景色などの視覚的な設定は
すべてPrefab上で直接調整する。コード側にこれらの設定値は持たない。

**Prefab構造:**
```
NoisePrefab (HorizontalLayoutGroup + ContentSizeFitter)
├── IconBG (Image + LayoutElement)  ← 背景色・サイズはここで調整
│   └── Icon (Image, stretched)      ← スプライトはコードが動的設定
└── Text (TMP_Text)                  ← フォント・色・サイズはここで調整
```

- **IconBG**: Speaker指定ありでアイコンが見つかる場合のみ表示。見つからない場合は非表示
- **Icon**: `PortraitDatabase.GetIcon(speaker)` で取得したスプライトを動的に設定
- **Text**: `FormatNoiseText()` で整形されたテキストを動的に設定

### 立ち絵表情連動

雑音のspeakerが現在表示中の立ち絵と一致する場合、表情を一時変更する。

```
NoiseEntry {
    Speaker: "alice",
    Text: "えー、マジ？",
    Expression: "surprised"   ← 一時表情ID（nullなら変更なし）
}
         ↓ SpawnNoise時にコールバック発火
NovelPartEventUI.OnNoiseSpawned()
         ↓ Speaker == leftState.CharacterId / rightState.CharacterId?
PortraitPresenter.SetTemporaryExpression(Left/Right, "surprised")
         ↓
         ↓ Speaker == centralObjectPresenter.CurrentCharacterId?
CentralObjectPresenter.SetTemporaryExpression("surprised")
         ↓ スプライトのみ差し替え（currentState/currentExpressionは変更しない）
         ↓
次のステップ開始時 → ClearTemporaryExpressions() → 元の表情に戻る
```

**マッチング対象**: 左右の立ち絵 + 中央オブジェクト（`centralObjectCharacterId`設定時のみ）
**リバートタイミング**: 次のステップ冒頭（ClearTemporaryExpressions）
**複数雑音時**: 同一ステップ内は last-write-wins（最後の雑音の表情が表示される）
**中央オブジェクト**: DialogueStep.centralObjectCharacterIdがnullの場合（静物）はマッチング対象外

### Accelerate（入力時自動発火）

ユーザーが「次」を押した時、RunnerがExecuteStepの入力待ち後に `AccelerateNoises()` を自動で呼ぶ。
残存している雑音が **EaseIn Quad**（0.3秒）で **5倍速** まで滑らかに加速し、画面左へ捌ける。

```
入力待ち解決 → AccelerateNoises()
                  ↓
           各NoiseInstance:
             BaseSpeed = 現在速度
             TargetSpeed = 現在速度 × 5
             AccelElapsed = 0
                  ↓
           毎フレーム: t = (elapsed / 0.3)², Speed = Lerp(Base, Target, t)
                  ↓
           0.3秒後に最高速到達 → テキスト全体が左端を通過したら破棄
```

次ステップで `Play()` が呼ばれると `isAccelerated` がリセットされ、新しい雑音は通常速度で流れる。

#### 加速中に遅延スポーンされる雑音の挙動

各NoiseEntryには `DelaySeconds`（インスペクタ上で手動設定）があり、コルーチンで時間差スポーンされる。
`AccelerateNoises()` 後にまだスポーンされていない雑音がある場合:

- **既にスポーン済みの雑音**: EaseIn Quadで滑らかに加速
- **加速後にスポーンされる雑音**: **生成時点から即座に最高速度**（EaseInなし）

これは意図的な仕様。加速後にスポーンされる雑音はまだ画面に出ていないため、
滑らかな加速演出は視覚的に意味がなく、即座に捌ける方が自然。

---

## ExecuteStep 実行順序

各ステップで以下の順序で演出が実行される。

```
ExecuteStep(step)
│
│  ── 準備 ──
├── 0. SetTabState()              UI可視化（アニメーション前に必ず呼ぶ）
├── 0.5. ClearTemporaryExpressions() 前ステップの雑音一時表情をリセット
│
│  ── プレゼンテーション（順序保証） ──
├── 1. 背景変更                    Show / Hide / SlideIn
├── 2. 立ち絵変更                  Rockman / SlideTop / SlideBottom / None
│       └── Dinoid→Portrait切替時: ステップ3に延期（deferPortrait）
├── 2.5. 中央オブジェクト変更       UpdateCentralObjectSprite
├── 3. テキストボックス切替
│       ├── Portrait→Dinoid: Exit(左右同時) → SwitchTextBox
│       └── Dinoid→Portrait: FadeOutCurrent → ShowPortrait → FadeInNew
│
│  ── テキスト + 雑音（並列） ──
├── 4a. テキスト表示                ShowText / SetReactionText
├── 4b. 雑音発火                   PlayNoise（fire-and-forget + 表情連動コールバック）
│
│  ── 入力 ──
├── 5. 入力待ち                    WaitForNextAsync / WaitForNextOrBackAsync
│
│  ── 後処理 ──
├── 6. 選択肢表示                  ShowChoices → WaitForChoiceAsync
└── 7. Effect実行                  ApplyEffects
```

**差分判定**: 1〜3は前ステップ（previousStep）と比較し、変化がある場合のみ実行される。

---

## ノベルパート終了時の演出

全ステップ完了後、UIが消える前にクリーンアップ演出が実行される。

```
RunDialogueAsync() 終了
│
│  ── クリーンアップ（finally） ──
├── ClearReactions()
├── SetBackButtonEnabled(false)
├── SetProtagonistSpiritualProperty(null)
├── 立ち絵退場                       ExitPortrait(Left) + ExitPortrait(Right) 同時
│     └── 表示中の立ち絵のみスライドアウト（未表示側はスキップ）
├── SetTabState(walk)                UIレイヤー非表示
│
│  ── NovelDialogueStep側 ──
└── ExitZoomAsync()                  ズームアウト（ズームしていた場合）
```

**立ち絵の退場**: UIが**まだ見えている間**にExit()（スライドアウト）が実行される。
左は左へ(-500px)、右は右へ(+500px)スライドし、完了後にSetTabState(walk)でUI全体が消える。

**リアクション終了時**: HideAllAsync()で立ち絵が即座にクリアされるため、finally内のExit()はスキップされる（state==nullガードにより安全にno-op）。

---

## 復元時の対応表

「戻る」機能で使用される。通常のトランジションメソッドと対になる即座版が存在する。

| 通常（トランジション付き） | 復元用（即座） | 対象 |
|--------------------------|--------------|------|
| `SwitchMode(mode)` | `SetModeImmediate(mode)` | TextBoxPresenter |
| `Show(left, right)` | `RestoreImmediate(left, right)` | PortraitPresenter |
| `Show(backgroundId)` | `ShowImmediate(backgroundId)` | BackgroundPresenter |
| `Hide()` | `HideImmediate()` | BackgroundPresenter |
| `UpdateCentralObjectSprite(s)` | （同じメソッドで即座） | CentralObjectPresenter |

復元後、同じステップが再実行されるため、テキスト・雑音は自然に再発火する。

---

## データベース

### PortraitDatabase

| データ | 用途 |
|--------|------|
| CharacterId → Icon（Sprite） | Dinoidモードのアイコン表示(100×100)、雑音アイコン(40×40) |
| CharacterId → DefaultPortrait（Sprite） | 立ち絵（表情未指定時） |
| CharacterId + Expression → Portrait（Sprite） | 立ち絵（表情指定時） |
| CharacterId → ThemeColor（Color） | Rockmanトランジションの縦線色 |

**アイコン画像の推奨サイズ: 100×100px**
- Dinoidテキストボックス: 100×100で表示（等倍）
- 雑音: 40×40で表示（Prefab上のLayoutElementで調整）
- 正方形の画像を登録すること

### BackgroundDatabase

| データ | 用途 |
|--------|------|
| BackgroundId → Sprite | 背景画像 |
| BackgroundId → Tint（Color） | 色調補正（デフォルト白） |

---

## LitMotion 使用パターン

全Presenterで共通のアニメーション待機パターンを使用。

```csharp
var completed = false;
LMotion.Create(start, end, duration)
    .WithEase(ease)
    .WithOnComplete(() => completed = true)
    .Bind(value => { /* プロパティ更新 */ })
    .AddTo(gameObject);
await UniTask.WaitUntil(() => completed);
```

| イージング | 用途 |
|-----------|------|
| OutQuad | 登場系（減速して定位置に収まる） |
| InQuad | 退場系（加速して消える） |
| OutBack | テキストボックス登場（オーバーシュート感） |
